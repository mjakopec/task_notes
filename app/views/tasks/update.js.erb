<% if @task.errors.any? %>
  $("#msgbx").hide(300);
  $("#msgbx").html("<%= escape_javascript(error_messages_for(@task))%>");
  $("#msgbx").show(300);
<% else %>
  $("#msgbx").hide(300);
  $("#msgbx").html("<%= escape_javascript(flash[:notice])%>");
  $("#msgbx").show(300);
  $(":input:not(input[type=submit])").val("");
  who = "#task_"+ <%= @task.id %>;
  $('input[name="commit"]').val("Create Post");
  $('form').attr('action', 'tasks');
  $(who).replaceWith("<%= escape_javascript(render(:partial => "item")) %>");
  $(who).effect('highlight', {color: 'yellow', mode: 'fadeIn'}, 2000);
<% end %>